#  												[大合奏]使用教程

​														![1570334206913](C:\Users\tooko\AppData\Roaming\Typora\typora-user-images\1570334206913.png)

-----

## 0.免责声明

![1570334064740](C:\Users\tooko\AppData\Roaming\Typora\typora-user-images\1570334064740.png)

## 1.界面说明

​		![1570336113284](C:\Users\tooko\AppData\Roaming\Typora\typora-user-images\1570336113284.png)			

## 2.初期设置

​	**第一次使用时请务必进行键位设置。**![1570334404062](C:\Users\tooko\AppData\Roaming\Typora\typora-user-images\1570334404062.png) 

1. 根据游戏中的键位布局选择8键或者22键（即全音阶显示）

2. 点击高亮的按钮，打开键位配置界面

   ![1570334493453](C:\Users\tooko\AppData\Roaming\Typora\typora-user-images\1570334493453.png)

3. 在输入框中直接按下与**游戏演奏UI相同**的按键

   > **请注意：**游戏中无法绑定的按键即便在大合奏中可以绑定，也无法在游戏中正常演奏。比如小键盘的数字等。 

4. 也可以选择导入其他玩家或者前一版本的按键配置，导入后确认界面显示无误后，点击应用退出绑定界面。

## 3.自动演奏

>[大合奏!]使用midi文件作为自动演奏用的输入。由于游戏机能限制，不是每个从midishow或者其他什么乱七八糟网站下载的midi都可以很好地演奏。

1. 点击导入按钮，打开midi文件

   ![1570337177267](C:\Users\tooko\AppData\Roaming\Typora\typora-user-images\1570337177267.png)

2. 选择相应的轨道

   ![1570337202215](C:\Users\tooko\AppData\Roaming\Typora\typora-user-images\1570337202215.png)

3. 如有必要，进行相应的速度和音高调整

4. 进入游戏，在演奏界面按下**Ctrl+F10**开始演奏

5. 如需要中途停止，按下**Ctrl+F11**即可

## 4.Midi键盘演奏

​	![1570337330274](C:\Users\tooko\AppData\Roaming\Typora\typora-user-images\1570337330274.png)

1. 将midi键盘通过usb连接到电脑上，在键盘选择的下拉项中找到自己的midi设备

2. 点击开始连接，当提示连接成功后即可在游戏中使用midi键盘进行演奏。

   ​	![1570337599657](C:\Users\tooko\AppData\Roaming\Typora\typora-user-images\1570337599657.png)

## 5.合奏

> 目前的合奏是建立在自动演奏的基础上，因此请先参考自动演奏部分进行midi的导入和音轨选择等配置。

1. 与合奏的队友们约定好同步演奏的时间，点击**开始抓包**

   ![1570338723833](C:\Users\tooko\AppData\Roaming\Typora\typora-user-images\1570338723833.png)

2. 正常情况下，软件会自动同步时间并在左下角显示误差。**开启抓包**按钮变为**停止抓包**

3. 如果有玩家延迟较高，可以通过将**网络延迟**设为负值进行补正。

4. 完成设置的玩家们点击**准备好了**按钮，返回游戏等待同步演奏即可。

5. 演奏中如需中断同样按下**Ctrl+F11**即可。

## 常见问题

### 1.软件界面问题

​	在高分辨率下系统缩放会导致软件界面错乱，此时请在软件exe右键-属性-兼容性-更改高dpi设置，取消勾选所有高DPI缩放替代选项。

​	![1570339474373](C:\Users\tooko\AppData\Roaming\Typora\typora-user-images\1570339474373.png)

![1570340396897](C:\Users\tooko\AppData\Roaming\Typora\typora-user-images\1570340396897.png)



### 2.midi播放问题

​	由于游戏音域限制，超出音域的音无法演奏，表现像为“吃音”，实际上软件并无问题。



## 更新履历

### 2.2.0.0 (2019/10/6)

1. 抓包合奏功能优化
2. midi键盘连接功能优化
3. 增加了读取轨道名的机能
4. 增加了播放时间的显示
5. 增加了后台演奏功能
6. 增加了键位导入导出功能

### 2.1.0.0 (2019/9/30)

1. 优化了和弦处理的逻辑
2. 针对变速曲完善了相应处理
3. 增加了抓包合奏功能
4. 优化了midi键盘按键采集，减少吃音现象
5. 更新服务器转移到中国大陆，避免github被墙

### 2.0.1.9 (2019/04/01)

1. 合奏功能α开放，并且追加了时间同步功能
2. 完全重写了Midi解析部分，演奏会更加流畅
3. 追加了Midi的试听功能
4. 修复了8键下的部分bug
5. 界面微调，预留网络合奏用接口

### 2.0.1.2 (2018/10/22)

1. 修复了BPM过高或过低导致软件崩溃的Bug
2. 修复了读取Midi文件的错误处理，读取到错误的Midi文件时也可以正常处理了
3. 修复了快捷键重复注册时无法退出的Bug
4. 修改了自动更新的一个逻辑

### 2.0.1.1 (2018/10/10)

1. 功能追加
   -和弦分解（beta）
   -自动读取起始BPM并忽略掉Format1的速度轨
   -版本更新检测
2. 逻辑修正
   -修正了演奏算法，现在会更加流畅
   -针对部分错误追加了提示
   -修正了部分Midi文件读取失败的错误
   -修正了部分Midi键盘无法读取NoteOff的问题